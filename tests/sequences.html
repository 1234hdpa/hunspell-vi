<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>Sequences</title>
    <script type="text/javascript">
    <!--
        function convertToOld() {
            var seqsBox = document.getElementById("sequences");
            var chars = seqsBox.value.split("\n");
            var seqs = {};
            for each (var line in chars) {
                line = line.split(/\t|\s\s+/);
                seqs[line[0]] = line[1];
            }
            var wordsBox = document.getElementById("words");
            var words = wordsBox.value.toLowerCase().split(/\s+/);
            
            var resultsBox = document.getElementById("results");
            resultsBox.value = "";
            resultsBox.focus();
            for each (var word in words) {
                for each (var letter in word) {
                    var seq = seqs[letter];
                    if (!seq) {
                        wordsBox.value = "Error on '" + word + "': '" + letter +
                            "'.";
                        return false;
                    }
                    for each (var pt in seq) {
                        var e = document.createEvent("KeyEvents");
                        e.initKeyEvent("keypress", true, true, null, false,
                                       false, false, false, 0, pt.charCodeAt());
                        resultsBox.dispatchEvent(e);
                        
//                        var e = new Object();
//                        e.target = document.getElementById("results");
//                        e.which = pt.charCodeAt();
//                        e.ctrlKey = e.altKey = false;
//                        AVIMObj.keyPressHandler(e);
                    }
                }
                resultsBox.value += "\n";
            }
            return false;
        }
    -->
    </script>
</head>
<body>
    <form action="" method="get">
        <label for="sequences">Sequences:</label><br />
        <textarea id="sequences" readonly="readonly" rows="20" cols="80">a	a
á	a'
à	a`
ã	a~
ả	a?
ạ	a.

â	a^
ấ	a^'
ầ	a^`
ẫ	a^~
ẩ	a^?
ậ	a^.

ă	a(
ắ	a('
ằ	a(`
ẵ	a(~
ẳ	a(?
ặ	a(.

b	b

c	c

d	d

đ	dd

e	e
é	e'
è	e`
ẽ	e~
ẻ	e?
ẹ	e.

ê	e^
ế	e^'
ề	e^`
ễ	e^~
ể	e^?
ệ	e^.

f	f

g	g

h	h

i	i
í	i'
ì	i`
ĩ	i~
ỉ	i?
ị	i.

j	j

k	k

l	l

m	m

n	n

o	o
ó	o'
ò	o`
õ	o~
ỏ	o?
ọ	o.

ô	o^
ố	o^'
ồ	o^`
ỗ	o^~
ổ	o^?
ộ	o^.

ơ	o+
ớ	o+'
ờ	o+`
ỡ	o+~
ở	o+?
ợ	o+.

p	p

q	q

r	r

s	s

t	t

u	u
ú	u'
ù	u`
ũ	u~
ủ	u?
ụ	u.

ư	u+
ứ	u+'
ừ	u+`
ữ	u+~
ử	u+?
ự	u+.

v	v

w	w

x	x

y	y
ý	y'
ỳ	y`
ỹ	y~
ỷ	y?
ỵ	y.

z	z</textarea><br />
        <label for="words">Words:</label><br />
        <textarea id="words" rows="20" cols="80"></textarea><br />
        <button id="convert" type="button" onclick="convertToOld();">Convert</button>
        <hr />
        <label for="result">Result:</label><br />
        <textarea id="results" rows="20" cols="80"></textarea>
    </form>
    <script type="text/javascript" src="avim.js"></script>
</body>
</html>
